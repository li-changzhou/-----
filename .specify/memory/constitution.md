<!-- 
=============================================================================
同步影响报告 - 章程初始化
=============================================================================

版本更改: 无（初始版本 1.0.0）
批准日期: 2026-01-22
修正日期: 2026-01-22

新增原则:
1. I. 规范驱动设计 - 强制每个功能从规范开始
2. II. 测试优先实施 - 强制 TDD 流程
3. III. 分层验证体系 - 合约、集成、单元、功能测试
4. IV. 可观测性与可调试性 - 结构化日志和人类可读输出
5. V. 语义版本控制与破坏性变更管理 - SEMVER 规则
6. VI. 简洁性与 YAGNI 原则 - 最小化复杂度
7. VII. 用户故事独立性 - MVP 增量交付

新增部分:
- 工作流程与质量门禁
- 详细的治理规则和合规审查

更新的模板:
✅ .specify/templates/plan-template.md - 更新"章程检查"部分，包含 7 项检查项
✅ .specify/templates/spec-template.md - 添加强制要求声明
✅ .specify/templates/tasks-template.md - 强调测试优先原则为强制性
⚠️ .specify/templates/checklist-template.md - 无需更新（通用模板）
⚠️ .specify/templates/agent-file-template.md - 已检查（通用模板）

延迟项（TODO）: 无

说明: 这是项目的初始章程版本。所有后续规范、计划和任务必须遵守这些原则。
=============================================================================
-->

# DragonTrail AI 原型项目章程

## 核心原则

### I. 规范驱动设计
每个功能必须从清晰的规范（spec）开始，包含用户故事、验收场景和需求定义。规范必须得到利益相关者批准，然后才能启动开发。这确保了需求透明、可追踪和可测试。

### II. 测试优先实施（强制）
遵循测试驱动开发（TDD）流程：先编写测试 → 用户审查和批准测试 → 测试失败（红）→ 最小实现（绿）→ 重构。所有代码必须有单元测试、集成测试或合约测试覆盖。测试是代码审查的强制性门禁。

### III. 分层验证体系
- **合约测试**：验证跨模块/服务的接口契约
- **集成测试**：验证功能在真实端到端场景中的运作
- **单元测试**：验证个别组件的逻辑
- **功能测试**：根据规范的验收场景验证功能完整性

### IV. 可观测性与可调试性
所有系统输出必须是人类可读且可结构化的（支持 JSON 和文本格式）。必须实施结构化日志、明确的错误消息和运行时可见性。文本 I/O 确保开发过程中的完整可调试性。

### V. 语义版本控制与破坏性变更管理
遵循 SEMVER（MAJOR.MINOR.PATCH）：
- **MAJOR**：向后不兼容的变更（API 删除、重大重构）
- **MINOR**：向后兼容的功能添加或扩展
- **PATCH**：错误修复、文档更新、澄清

所有破坏性变更必须在发布说明中明确记录，并提供迁移指南。

### VI. 简洁性与 YAGNI 原则
从最简单的解决方案开始。不添加未明确需要的功能、抽象或复杂性。每个新功能、库或服务必须有明确的业务或技术理由。复杂性违规必须在代码审查中明确证明。

### VII. 用户故事独立性
每个用户故事必须能够独立设计、实施、测试和部署。故事应该按优先级（P1、P2、P3）排列，每个故事都能作为增量 MVP 交付价值。

## 工作流程与质量门禁

**规范阶段**：
- 输入：用户需求或功能描述
- 产出：spec.md（用户故事、验收场景、需求）
- 门禁：规范必须包含至少一个可独立测试的 P1 故事

**计划阶段**：
- 输入：已批准的规范
- 产出：plan.md（技术背景、架构、项目结构）
- 门禁：计划必须通过"章程检查"（原则合规验证）

**实施阶段**：
- 输入：已批准的计划和规范
- 产出：tasks.md（具体任务）、源代码、测试、文档
- 门禁：所有测试通过 + 代码审查批准 + 规范验收场景通过

## 治理

### 章程的权威性
本章程优先于所有其他开发实践。所有规范、计划和任务必须符合这些原则。任何例外或偏离必须在代码审查中显式说明并证明其必要性。

### 修正程序
- 对章程的修改必须文档化、版本化并追踪
- 重大原则更改需要团队讨论和批准
- 修改必须包括迁移计划和影响分析
- 所有相关工件（模板、运行时指南、工作流）必须更新以保持一致

### 合规审查
- 所有 PR/合并请求必须验证：
  - 遵循现有规范（如果适用）
  - 测试覆盖率达到预期（100% 关键路径）
  - 不违反核心原则（尤其是原则 II：测试优先）
  - 破坏性变更正确版本化并文档化

### 版本控制策略
- 规范版本：与功能分支同步
- 章程版本：独立语义版本化
- 代码版本：基于功能完成或发布周期

### 运行时指导
开发过程中的具体工作流程见：
- `.specify/templates/plan.md`：实施计划指南
- `.specify/templates/spec.md`：规范编写指南
- `.specify/templates/tasks.md`：任务分解指南

**版本**: 1.0.0 | **批准日期**: 2026-01-22 | **最后修正**: 2026-01-22
